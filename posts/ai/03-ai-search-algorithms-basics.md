---
title: "探索アルゴリズムの基礎"
date: "2025-6-29"
tags: ["探索アルゴリズム", "幅優先探索", "モンテカルロ法"]
section: "ai"
slug: "03-ai-search-algorithms-basics"
difficulty: "basic"
number: 3
---

AIの基本的な動作の一つが「探索」です。人間が迷路の出口を探すように、AIも様々な方法で答えを探し出します。この記事では、AIの探索技術について、身近な例を使って分かりやすく解説します。

## 探索とは何か？

**探索とは、要するに「たくさんの選択肢の中から、最適な答えを見つけ出すこと」**です。たとえば、人間が以下のような場面で「探索」をしています：

- **迷路を解く**：どの道を進めば出口にたどり着けるかを探す
- **将棋を指す**：どの手を打てば勝てるかを探す
- **旅行の計画**：どのルートで行けば最短時間で目的地に着けるかを探す

AIも同じように、与えられた問題に対して最適な解決策を「探索」によって見つけ出します。

## 探索木という考え方

AIの探索を理解するために、**探索木**という概念を使います。

**探索木とは、要するに「すべての可能性を木の形で表したもの」**です。たとえば、じゃんけんで次に何を出すかを考える場合：

```
      スタート
    /    |    \
   グー  チョキ  パー
   /|\   /|\   /|\
  ... ... ... ... ... ...
```

- **根（ルート）**：問題の開始点
- **枝（ブランチ）**：選択できる行動
- **葉（リーフ）**：最終的な結果

**たとえば、ハノイの塔**という有名なパズルでは：
- 3つの棒（A、B、C）がある
- A棒に大きさの違う円盤が重なっている
- 小さい円盤を大きい円盤の上に置いてはいけない
- すべての円盤をC棒に移動させる

この問題では、「どの円盤をどの棒に移動するか」という選択肢が探索木の枝になります。

## 基本的な探索手法

### 幅優先探索（BFS）

**幅優先探索とは、要するに「近いところから順番に調べていく方法」**です。

**具体的な動作**：
1. スタート地点から1歩で行ける場所をすべて調べる
2. 次に、2歩で行ける場所をすべて調べる
3. これを答えが見つかるまで繰り返す

**たとえば、迷路で考えると**：
- 現在地の上下左右をすべてチェック
- 答えが見つからなければ、さらに1歩先の場所をすべてチェック
- 階層的に広がっていくイメージ

**メリット**：
- 最短距離の答えが必ず見つかる
- 答えの見落としがない

**デメリット**：
- 選択肢が多いと、調べる場所が爆発的に増える
- 記憶容量をたくさん使う

### 深さ優先探索（DFS）

**深さ優先探索とは、要するに「一つの道を最後まで進んでから、別の道を試す方法」**です。

**具体的な動作**：
1. スタート地点から一つの方向に進む
2. 行き止まりになったら戻って、別の道を試す
3. これを答えが見つかるまで繰り返す

**たとえば、迷路で考えると**：
- まず右方向にひたすら進む
- 行き止まりになったら戻って、今度は上方向に進む
- 一本道を最後まで進んでから別の道を試すイメージ

**メリット**：
- 記憶容量をあまり使わない
- プログラムが簡単

**デメリット**：
- 最短距離の答えが見つからない場合がある
- 無限ループに陥る可能性がある

## 高度な探索手法

### ヒューリスティック探索

**ヒューリスティック探索とは、要するに「勘を使って効率的に探索する方法」**です。

人間が迷路を解くとき、「ゴールの方向に向かって進んだほうが良さそう」と直感的に判断しますが、これと同じ考え方をAIに組み込みます。

**たとえば**：
- **カーナビの経路探索**：「直線距離で近い方向を優先的に探索する」
- **パズルゲーム**：「完成に近い状態を優先的に探索する」

### モンテカルロ法

**モンテカルロ法とは、要するに「ランダムに試してみて、統計的に最適解を見つける方法」**です。

**具体的な動作**：
1. ランダムに行動を選んで実行する
2. その結果を記録する
3. 何千回、何万回と繰り返す
4. 統計的に最も良い結果が出る行動を選ぶ

**たとえば**：
- **囲碁AI**：ランダムに石を置いて対局を最後まで進め、勝率の高い手を見つける
- **投資戦略**：ランダムに投資パターンを試して、最も利益の出る戦略を見つける

**メリット**：
- 複雑すぎて計算できない問題でも解ける
- 意外な良い解が見つかることがある

**デメリット**：
- 最適解が保証されない
- 計算時間がかかる

## ブルートフォース（総当たり）

**ブルートフォースとは、要するに「可能性をすべて試してみる方法」**です。

**具体的な例**：
- **パスワード解析**：0000から9999まで、すべての数字の組み合わせを試す
- **チェス**：可能な手をすべて計算して、最適な手を見つける

**メリット**：
- 確実に最適解が見つかる
- プログラムが単純

**デメリット**：
- 選択肢が多いと計算時間が莫大になる
- 現実的でない場合が多い

**たとえば**：
- チェスの場合、10手先を読むだけで10^40通り以上の可能性がある
- 宇宙の原子の数は約10^80個なので、半分の数の可能性を調べることになる

## 実際の応用例

### カーナビゲーション

現在のカーナビは、複数の探索手法を組み合わせています：

1. **前処理**：道路ネットワークを探索木として表現
2. **ヒューリスティック**：目的地への直線距離を「勘」として使用
3. **動的更新**：渋滞情報に基づいて探索方向を調整

### ゲームAI

**将棋や囲碁のAI**では：
- 深さ優先探索で数手先を読む
- モンテカルロ法でランダムな対局をシミュレーション
- 過去の棋譜データから学習した「勘」を使用

### ロボットの経路計画

**お掃除ロボット**では：
- 幅優先探索で部屋全体の地図を作成
- 効率的な清掃順序を探索
- 障害物回避のための再探索

## 探索の計算量問題

### 指数爆発

多くの探索問題は、選択肢が増えると計算量が指数的に増加します。

**たとえば**：
- **N个都市の巡回セールスマン問題**：N! (Nの階乗)の計算が必要
- 10都市なら 3,628,800通り（まだ計算可能）
- 20都市なら 2,432,902,008,176,640,000通り（現実的でない）

### 現実的な解決策

実際のAIシステムでは、以下のような工夫をしています：

1. **近似解で妥協**：最適解でなくても「十分良い解」を採用
2. **時間制限**：一定時間内で見つかった最良解を採用
3. **問題の分割**：大きな問題を小さな問題に分けて解決

## まとめ

探索アルゴリズムは、AIの基本的な「考える」仕組みです。たとえば、私たちが毎日使っているGoogleマップの経路案内も、高度な探索アルゴリズムの結果なのです。

要するに、AIの探索とは人間の「考える」プロセスをコンピュータで再現したものであり、効率性と正確性のバランスを取りながら最適解を見つけ出す技術です。

次回は、ゲームAIで使われる高度な探索手法について、同じように分かりやすく解説していきます。